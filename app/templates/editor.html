<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Editor | Cassis-Verif</title>
        <meta name="description" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script src="{{ url_for('static', path='tree-js/tree.min.js') }}"></script>
        <link rel="stylesheet" href="{{ url_for('static', path='tree-js/treejs.min.css') }}" />
        <link rel="stylesheet" href="{{ url_for('static', path='nice-select2/nice-select2.css') }}" />
        <link rel="stylesheet" href="{{ url_for('static', path='layout.css') }}" />
        <link rel="stylesheet" href="{{ url_for('static', path='editor.css') }}" />
    </head>
    <body>
        <header class="header">
            <h1>Cassis-Verif</h1>
            <nav>
                <a href="{{ url_for('home') }}">Home</a>
                <a href="{{ url_for('software_design_document') }}">Software-Design-Document</a>
                <a href="{{ url_for('doxygen') }}">Doxygen</a>
            </nav>
        </header>

        <main class="content">
            <!-- TODO: Use SplitJS -->
            <aside id="dir-tree">
                <!-- TODO: 2 Tabs (Files & Git) -->
                <div class="lds-dual-ring"></div>
            </aside>
            <div class="editor-container">
                <div class="toolbar">
                    <button class="button" onclick="save_file(event)">Save</button>
                    <span class="notification"></span>
                </div>
                <div id="editor"></div>
            </div>
            <div class="hints-container">
                <div class="toolbar">
                    <button id="btn-toggle-editor" class="button" onclick="toggle_editor()">Hide Editor</button>
                    <select id="sel-proof" class="sel-proof" onchange="on_proof_select(event)">
                        {% for proof in proofs %}
                            <option value="{{ proof.name }}" data-harness="{{ proof.harness }}" {{ 'selected' if proof.name == selected_proof.name }}>{{ proof.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="hints">
                    <h1>TODO: Hints</h1>
                    <!-- <div class="lds-dual-ring"></div> -->
                </div>
            </div>
        </div>

        <dialog id="contextmenu-file" class="contextmenu">
            <ul>
                <li><button data-path="" onclick="show_confirm_delete_entry_modal(event)">Delete File</button></li>
            </ul>
        </dialog>

        <dialog id="contextmenu-dir" class="contextmenu">
            <ul>
                <li><button data-path="" onclick="show_create_file_modal(event)">Create File</button></li>
                <li><button data-path="" onclick="show_create_dir_modal(event)">Create Folder</button></li>
                <li><button data-path="" onclick="show_confirm_delete_entry_modal(event)">Delete Folder</button></li>
            </ul>
        </dialog>

        <dialog id="modal-confirm-delete-entry" class="modal">
            <h2 class="modal-text">Delete Entry</h2>
            <p class="modal-text">Are you sure you want to delete the following file/folder?</p>
            <p class="modal-text code"><span id="entry-path" data-path=""></span></p>
            <form class="modal-form" method="dialog">
                <div class="modal-buttons">
                    <button class="button danger" onclick="delete_entry()">Confirm</button>
                    <button class="button" autofocus>Cancel</button>
                </div>
            </form>
        </dialog>

        <dialog id="modal-create-entry" class="modal">
            <h2 class="modal-text">Create <span id="entry-type" data-type=""></span></h2>
            <p class="modal-text alert danger hidden"></p>
            <form class="modal-form modal-form-25" method="dialog">
                <input id="entry-name" type="text" placeholder="Name" value="" />
                <div class="modal-buttons">
                    <button class="button success" onclick="create_entry(event)" data-parent="">Create</button>
                    <button class="button" autofocus>Cancel</button>
                </div>
            </form>
        </dialog>

        <script src="{{ url_for('static', path='nice-select2/nice-select2.js') }}"></script>
        <script src="{{ url_for('static', path='monaco-editor/min/vs/loader.js') }}"></script>
        <script src="{{ url_for('static', path='editor.js') }}"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                NiceSelect.bind(document.querySelector("select"), {
                    searchable: true,
                    searchtext: "Search",
                });
            });
        </script>
    </body>
</html>
